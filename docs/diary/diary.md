## 2023 январь 3

Решила, значит, я написать статью. Вот думаю, опишу о том, ка у меня замечательно получилось через github-actions задеплоить свой проект. Какой проект - это уже неважно. Потому что он может быть любой.
Из шаблона для Ruby on Rails на гитхабе создала я github-action. Для этого надо нажать на вкладку Actions и там вы все шаблоны увидите.
В шаблоне для RoR была загрузка postgress, проверка гита.
У меня был сгенерированный проект, я лишь добавила простую модель для генерации схемы базы данных.
Предварительные шаги:

1. На своем арендованном сервере сгенерировала публичный ssh-ключ. Вот он в списке:
   ![List of keys on my server](img/0.png)
   Публичный ключ - это содержимое файла `*.pub`
2. Копирую содержимое публичного ключа
   ![Public key content](img/3.png)
3. В секретные ключи проекта `Settings > Secrets > Actions`. Как видите, назвала его `SSH_PRIVATE_KEY`. Также я туда добавила `SSH_USER` и `SSH_HOST` - ваш пользователь на вашем сервере и IP-адрес того сервера.
   ![Actions secrets](img/1.png)

Я хотела сделать с github-actions сделать такие шаги:

1. Проверка кода линтером (`rubocop`)
2. Тестирование
3. Деплой
4. Добавляю `SSH_PRIVATE_KEY` в ключи операционки в контейнере, который создается на github.
5. Добавляю `SSH_HOST` в список доверенных адресов:
6. Копирую код своего проекта на свой сервер в определенную папку.

Исполнение деплоя:

1. Сожержимое

```bash
ssh-keyscan -H ${{ secrets.SSH_HOST }} >> ~/.ssh/known_hosts
```
